<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="../cuisines.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384">
    <title>Recipie Checker</title>
</head>

<body>
    <!--
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-analytics.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
          
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
              apiKey: "AIzaSyB4MaPQRuTJtGr57hT6-CMwmAUBALqAkKA",
              authDomain: "food-recipe-site-a9b34.firebaseapp.com",
              databaseURL: "https://food-recipe-site-a9b34-default-rtdb.europe-west1.firebasedatabase.app",
              projectId: "food-recipe-site-a9b34",
              storageBucket: "food-recipe-site-a9b34.appspot.com",
              messagingSenderId: "608052694362",
              appId: "1:608052694362:web:a5abf05de0810ae217b763",
              measurementId: "G-XBY7JES9ER"
            };
          
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
          </script>
          --->

    <ul>
        <li class="navbar">
        <li><a href="home.html">Home</a></li>
        <li><a href="recipe.html">Recipies</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="surprise_me.html">Surprise Me</a></li>
        <li style="float:right"><a href="login.html">Login</a></li>
        <li style="float:right"><a href="#about us">About Us</a></li>
    </ul>

   <div class="nutrition2">
        <div class="row">
            <form id="recipe-check-form">
                <div class="mb-3">
                    <label for="title" class="form-label">Recipe Title</label>
                    <input type="text" class="form-control" id="title" name="title" />
                </div>
                <div class="mb-3">
                    <label for="recipe" class="form-label">Recipe</label>
                    <br>
                    <textarea class="form-control" id="recipe" name="recipe" rows="10"></textarea>
                </div>
                <button class="btn btn-primary">Enter Recipe</button>
            </form>
        </div>
    </div>

    <div class="row2" id="output">

    </div>

    <script>
        (function () {
            const titleInput = document.getElementById('title')
            const recipeInput = document.getElementById('recipe');
            const output = document.getElementById('output');
            const appId = '88df4aaa';
            const apiKey = '8bd712b29f5a15bb39bb4ca4f997f862';

            function fetchRecipe() {
                let title = titleInput.value;
                let ingr = recipeInput.value.split('\n');

                return fetch(`https://api.edamam.com/api/nutrition-details?app_id=${appId}&app_key=${apiKey}`, {
                    method: 'POST',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ ingr })
                }).then(response => response.json());
            }

            document.getElementById('recipe-check-form').addEventListener('submit', function (e) {
                e.preventDefault();

                fetchRecipe().then(data => {
                    let fragments = [];

                    Object.keys(data.totalDaily).forEach(key => {
                        let obj = data.totalDaily[key]

                        fragments.push(`<dt>${obj.label}</dt><dd>${obj.quantity}${obj.unit}</dd>`);
                    })

                    let html = `<dl>
                        <dt>Calories</dt>
                        <dd>${data.calories}</dd>
                        ${fragments.join('')}
                        </dl>`;

                    output.innerHTML = html;

                    console.log(data)
                });
            })
        })();

    </script>




        <!--
        <div id="comments">
            <h4>Comments</h4>
            <ul id="oldComments"></ul>
            <form id="addComment">
                <label for="tbName">Username</label>
                <br>
                <input id="tbName" type="text" maxlength="25" required>
                <br>
                <label for="newComment">Your comment</label>
                <br>
                <textarea id="newComment" maxlength="2048" style="width: 20%;" required></textarea>
                <br>
                <input type="submit" id="btnSubmitComment" value="Submit Comment">
            </form>
        </div>
        -->

    </div>

</body>

</html>
